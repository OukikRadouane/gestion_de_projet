<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<StackPane xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1"
           fx:controller="com.gestionprojet.controller.LoginController"
           style="-fx-background-color: #1e293b;" prefWidth="900" prefHeight="650">

    <VBox alignment="CENTER" spacing="0" maxWidth="400">
        <padding>
            <Insets top="20" right="20" bottom="20" left="20"/>
        </padding>

        <VBox alignment="CENTER" spacing="25" maxWidth="400" prefHeight="550"
              style="-fx-background-color: rgba(255, 255, 255, 0.99); -fx-background-radius: 20px; -fx-effect: dropshadow(gaussian, rgba(0, 0, 0, 0.35), 40, 0, 0, 15);">
            <padding>
                <Insets top="40" right="35" bottom="40" left="35"/>
            </padding>

            <!-- En-tête -->
            <VBox alignment="CENTER" spacing="10">
                <HBox alignment="CENTER" spacing="12">
                    <Region style="-fx-background-color: #3b82f6; -fx-background-radius: 12px; -fx-min-width: 40px; -fx-min-height: 40px; -fx-max-width: 40px; -fx-max-height: 40px;"/>
                    <Label text="Project Manager"
                           style="-fx-text-fill: #0f172a; -fx-font-weight: bold; -fx-font-size: 24px; -fx-font-family: 'Segoe UI', 'Helvetica Neue', sans-serif;"/>
                </HBox>
                <Label text="Accédez à votre espace de travail"
                       style="-fx-text-fill: #64748b; -fx-font-size: 14px; -fx-font-family: 'Segoe UI', sans-serif; -fx-text-alignment: center;"/>
            </VBox>

            <!-- Formulaire -->
            <VBox spacing="16" prefWidth="330">
                <VBox spacing="6">
                    <Label text="Email ou nom d'utilisateur"
                           style="-fx-text-fill: #1e293b; -fx-font-weight: 600; -fx-font-size: 14px; -fx-font-family: 'Segoe UI', sans-serif;"/>
                    <TextField fx:id="usernameField" promptText="exemple@email.com"
                              style="-fx-background-color: #f8fafc; -fx-background-radius: 8px; -fx-border-color: #e2e8f0; -fx-border-width: 1.5px; -fx-border-radius: 8px; -fx-padding: 10px 14px; -fx-font-size: 14px; -fx-font-family: 'Segoe UI', sans-serif; -fx-prompt-text-fill: #94a3b8; -fx-focus-color: #3b82f6;"
                              prefWidth="330"/>
                </VBox>

                <VBox spacing="6">
                    <HBox alignment="CENTER_LEFT" spacing="0">
                        <Label text="Mot de passe"
                               style="-fx-text-fill: #1e293b; -fx-font-weight: 600; -fx-font-size: 14px; -fx-font-family: 'Segoe UI', sans-serif;"/>
                        <Region HBox.hgrow="ALWAYS"/>
                        <Hyperlink text="Oublié?"
                                  style="-fx-text-fill: #3b82f6; -fx-font-size: 13px; -fx-font-family: 'Segoe UI', sans-serif; -fx-cursor: hand; -fx-underline: false;"/>
                    </HBox>
                    <PasswordField fx:id="passwordField" promptText="Entrez votre mot de passe"
                                  style="-fx-background-color: #f8fafc; -fx-background-radius: 8px; -fx-border-color: #e2e8f0; -fx-border-width: 1.5px; -fx-border-radius: 8px; -fx-padding: 10px 14px; -fx-font-size: 14px; -fx-font-family: 'Segoe UI', sans-serif; -fx-prompt-text-fill: #94a3b8; -fx-focus-color: #3b82f6;"
                                  prefWidth="330"/>
                </VBox>

                <CheckBox fx:id="rememberMeCheckBox" text="Se souvenir de moi"
                         style="-fx-text-fill: #64748b; -fx-font-size: 13px; -fx-font-family: 'Segoe UI', sans-serif;"/>
            </VBox>

            <!-- Bouton de connexion -->
            <VBox spacing="10" prefWidth="330">
                <Label fx:id="errorLabel" text=""
                       style="-fx-text-fill: #7f1d1d; -fx-font-size: 13px; -fx-background-color: rgba(248, 113, 113, 0.1); -fx-background-radius: 6px; -fx-padding: 10px 14px; -fx-font-family: 'Segoe UI', sans-serif; -fx-border-color: rgba(248, 113, 113, 0.3); -fx-border-width: 1px; -fx-border-radius: 6px; -fx-wrap-text: true;"
                       visible="false" wrapText="true" maxWidth="330"/>

                <Button fx:id="loginButton" text="Se connecter" onAction="#handleLogin"
                        style="-fx-background-color: #3b82f6; -fx-text-fill: white; -fx-background-radius: 8px; -fx-font-weight: bold; -fx-font-size: 14px; -fx-cursor: hand; -fx-font-family: 'Segoe UI', sans-serif;"
                        prefWidth="330" prefHeight="44"/>
            </VBox>

            <!-- Séparateur -->
            <VBox alignment="CENTER" spacing="4">
                <Separator prefWidth="330" style="-fx-background-color: #e2e8f0;"/>
            </VBox>

            <!-- Lien d'inscription -->
            <HBox alignment="CENTER" spacing="6">
                <Label text="Pas encore de compte?"
                       style="-fx-text-fill: #64748b; -fx-font-size: 14px; -fx-font-family: 'Segoe UI', sans-serif;"/>
                <Hyperlink text="S'inscrire maintenant" onAction="#showRegisterView"
                          style="-fx-text-fill: #3b82f6; -fx-font-weight: 600; -fx-font-size: 14px; -fx-cursor: hand; -fx-underline: false; -fx-font-family: 'Segoe UI', sans-serif;"/>
            </HBox>
        </VBox>
    </VBox>
</StackPane>