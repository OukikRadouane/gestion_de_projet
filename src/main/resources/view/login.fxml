<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.shape.Circle?>

<StackPane xmlns="http://javafx.com/javafx/17"
           xmlns:fx="http://javafx.com/fxml/1"
           fx:controller="com.gestionprojet.controller.AuthController"
           stylesheets="@../css/style.css"
           styleClass="root-pane" alignment="CENTER">

    <VBox alignment="CENTER" maxWidth="450" spacing="20" styleClass="card" StackPane.alignment="CENTER">
        <padding>
            <Insets top="30" right="40" bottom="30" left="40"/>
        </padding>

        <!-- Logo & Title -->
        <VBox alignment="CENTER" spacing="15">
            <HBox alignment="CENTER" spacing="12">
                <Circle radius="12" styleClass="accent-circle"/>
                <Label text="ProjectHub" styleClass="title"/>
            </HBox>
            <Label text="Bienvenue. Connectez-vous pour continuer."
                   styleClass="small-text"/>
        </VBox>

        <!-- Form -->
        <VBox spacing="15">
            <VBox spacing="8">
                <Label text="Email ou nom d'utilisateur"
                       styleClass="label-strong"/>
                <TextField fx:id="loginUsernameField"
                           promptText="nom@exemple.com"
                           styleClass="input"/>
            </VBox>

            <VBox spacing="8">
                <HBox alignment="CENTER_LEFT">
                    <Label text="Mot de passe"
                           styleClass="label-strong"/>
                    <Region HBox.hgrow="ALWAYS"/>
                </HBox>
                <StackPane>
                    <PasswordField fx:id="loginPasswordField"
                                   promptText="••••••••"
                                   styleClass="input"/>
                    <TextField fx:id="loginPasswordFieldVisible"
                               promptText="Mot de passe"
                               styleClass="input"
                               visible="false"/>
                </StackPane>
            </VBox>

            <CheckBox fx:id="showPasswordCheckBox" text="Afficher le mot de passe"
                       onAction="#togglePasswordVisibility"
                       styleClass="small-text"/>
        </VBox>

        <!-- Action -->
        <VBox spacing="15">
            <Label fx:id="loginErrorLabel"
                   wrapText="true"
                   visible="false"
                   managed="false"
                   styleClass="error-box"/>

            <Button text="Se connecter"
                    onAction="#handleLogin"
                    styleClass="button-primary"
                    maxWidth="Infinity"
                    prefHeight="45"/>
        </VBox>

        <Separator/>

        <HBox alignment="CENTER" spacing="5">
            <Label text="Pas encore de compte ?"
                   styleClass="small-text"/>
            <Hyperlink text="S'inscrire"
                       onAction="#showRegisterView"
                       styleClass="link-strong"/>
        </HBox>
    </VBox>

</StackPane>
