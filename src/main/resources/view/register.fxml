<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<StackPane xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1"
           fx:controller="com.gestionprojet.controller.AuthController"
           style="-fx-background-color: #1e293b;" prefWidth="900" prefHeight="650">

    <VBox alignment="CENTER" spacing="0" maxWidth="440">
        <padding>
            <Insets top="20" right="20" bottom="20" left="20"/>
        </padding>

        <VBox alignment="TOP_CENTER" spacing="20" maxWidth="440" prefHeight="600"
              style="-fx-background-color: rgba(255, 255, 255, 0.99); -fx-background-radius: 20px; -fx-effect: dropshadow(gaussian, rgba(0, 0, 0, 0.35), 40, 0, 0, 15);">
            <padding>
                <Insets top="30" right="35" bottom="30" left="35"/>
            </padding>

            <!-- En-tête -->
            <VBox alignment="CENTER" spacing="8">
                <HBox alignment="CENTER" spacing="12">
                    <Region style="-fx-background-color: #3b82f6; -fx-background-radius: 12px; -fx-min-width: 40px; -fx-min-height: 40px; -fx-max-width: 40px; -fx-max-height: 40px;"/>
                    <Label text="Créer un compte"
                           style="-fx-text-fill: #0f172a; -fx-font-weight: bold; -fx-font-size: 24px; -fx-font-family: 'Segoe UI', 'Helvetica Neue', sans-serif;"/>
                </HBox>
                <Label text="Rejoignez Project Manager"
                       style="-fx-text-fill: #64748b; -fx-font-size: 14px; -fx-font-family: 'Segoe UI', sans-serif; -fx-text-alignment: center;"/>
            </VBox>

            <!-- Formulaire -->
            <VBox spacing="12" prefWidth="370">
                <!-- Prénom et Nom -->
                <HBox spacing="10">
                    <VBox spacing="6" HBox.hgrow="ALWAYS">
                        <Label text="Prénom"
                               style="-fx-text-fill: #1e293b; -fx-font-weight: 600; -fx-font-size: 14px; -fx-font-family: 'Segoe UI', sans-serif;"/>
                        <TextField fx:id="registerFirstNameField" promptText="Votre prénom"
                                  style="-fx-background-color: #f8fafc; -fx-background-radius: 8px; -fx-border-color: #e2e8f0; -fx-border-width: 1.5px; -fx-border-radius: 8px; -fx-padding: 10px 14px; -fx-font-size: 14px; -fx-font-family: 'Segoe UI', sans-serif; -fx-prompt-text-fill: #94a3b8; -fx-focus-color: #3b82f6;"/>
                    </VBox>
                    <VBox spacing="6" HBox.hgrow="ALWAYS">
                        <Label text="Nom"
                               style="-fx-text-fill: #1e293b; -fx-font-weight: 600; -fx-font-size: 14px; -fx-font-family: 'Segoe UI', sans-serif;"/>
                        <TextField fx:id="registerLastNameField" promptText="Votre nom"
                                  style="-fx-background-color: #f8fafc; -fx-background-radius: 8px; -fx-border-color: #e2e8f0; -fx-border-width: 1.5px; -fx-border-radius: 8px; -fx-padding: 10px 14px; -fx-font-size: 14px; -fx-font-family: 'Segoe UI', sans-serif; -fx-prompt-text-fill: #94a3b8; -fx-focus-color: #3b82f6;"/>
                    </VBox>
                </HBox>

                <VBox spacing="6">
                    <Label text="Nom d'utilisateur"
                           style="-fx-text-fill: #1e293b; -fx-font-weight: 600; -fx-font-size: 14px; -fx-font-family: 'Segoe UI', sans-serif;"/>
                    <TextField fx:id="registerUsernameField" promptText="Choisissez un nom d'utilisateur"
                              style="-fx-background-color: #f8fafc; -fx-background-radius: 8px; -fx-border-color: #e2e8f0; -fx-border-width: 1.5px; -fx-border-radius: 8px; -fx-padding: 10px 14px; -fx-font-size: 14px; -fx-font-family: 'Segoe UI', sans-serif; -fx-prompt-text-fill: #94a3b8; -fx-focus-color: #3b82f6;"
                              prefWidth="370"/>
                </VBox>

                <VBox spacing="6">
                    <Label text="Adresse email"
                           style="-fx-text-fill: #1e293b; -fx-font-weight: 600; -fx-font-size: 14px; -fx-font-family: 'Segoe UI', sans-serif;"/>
                    <TextField fx:id="registerEmailField" promptText="votre.email@exemple.com"
                              style="-fx-background-color: #f8fafc; -fx-background-radius: 8px; -fx-border-color: #e2e8f0; -fx-border-width: 1.5px; -fx-border-radius: 8px; -fx-padding: 10px 14px; -fx-font-size: 14px; -fx-font-family: 'Segoe UI', sans-serif; -fx-prompt-text-fill: #94a3b8; -fx-focus-color: #3b82f6;"
                              prefWidth="370"/>
                </VBox>

                <VBox spacing="6">
                    <Label text="Mot de passe"
                           style="-fx-text-fill: #1e293b; -fx-font-weight: 600; -fx-font-size: 14px; -fx-font-family: 'Segoe UI', sans-serif;"/>
                    <PasswordField fx:id="registerPasswordField" promptText="Au moins 8 caractères"
                                  style="-fx-background-color: #f8fafc; -fx-background-radius: 8px; -fx-border-color: #e2e8f0; -fx-border-width: 1.5px; -fx-border-radius: 8px; -fx-padding: 10px 14px; -fx-font-size: 14px; -fx-font-family: 'Segoe UI', sans-serif; -fx-prompt-text-fill: #94a3b8; -fx-focus-color: #3b82f6;"
                                  prefWidth="370"/>
                </VBox>

                <VBox spacing="6">
                    <Label text="Confirmer le mot de passe"
                           style="-fx-text-fill: #1e293b; -fx-font-weight: 600; -fx-font-size: 14px; -fx-font-family: 'Segoe UI', sans-serif;"/>
                    <PasswordField fx:id="registerConfirmPasswordField" promptText="Retapez votre mot de passe"
                                  style="-fx-background-color: #f8fafc; -fx-background-radius: 8px; -fx-border-color: #e2e8f0; -fx-border-width: 1.5px; -fx-border-radius: 8px; -fx-padding: 10px 14px; -fx-font-size: 14px; -fx-font-family: 'Segoe UI', sans-serif; -fx-prompt-text-fill: #94a3b8; -fx-focus-color: #3b82f6;"
                                  prefWidth="370"/>
                </VBox>

                <VBox spacing="6">
                    <Label text="Rôle"
                           style="-fx-text-fill: #1e293b; -fx-font-weight: 600; -fx-font-size: 14px; -fx-font-family: 'Segoe UI', sans-serif;"/>
                    <ComboBox fx:id="registerRoleComboBox"
                             style="-fx-background-color: #f8fafc; -fx-background-radius: 8px; -fx-border-color: #e2e8f0; -fx-border-width: 1.5px; -fx-border-radius: 8px; -fx-padding: 10px 14px; -fx-font-size: 14px; -fx-font-family: 'Segoe UI', sans-serif;"
                             prefWidth="370"/>
                </VBox>

                <CheckBox fx:id="termsCheckBox" text="J'accepte les conditions d'utilisation"
                         style="-fx-text-fill: #64748b; -fx-font-size: 13px; -fx-font-family: 'Segoe UI', sans-serif; -fx-padding: 8px 0;"/>
            </VBox>

            <!-- Bouton d'inscription -->
            <VBox spacing="10" prefWidth="370">
                <Label fx:id="registerErrorLabel" text=""
                       style="-fx-text-fill: #7f1d1d; -fx-font-size: 13px; -fx-background-color: rgba(248, 113, 113, 0.1); -fx-background-radius: 6px; -fx-padding: 10px 14px; -fx-font-family: 'Segoe UI', sans-serif; -fx-border-color: rgba(248, 113, 113, 0.3); -fx-border-width: 1px; -fx-border-radius: 6px; -fx-wrap-text: true;"
                       visible="false" wrapText="true" maxWidth="370"/>

                <Button text="S'inscrire" onAction="#handleRegister"
                        style="-fx-background-color: #3b82f6; -fx-text-fill: white; -fx-background-radius: 8px; -fx-font-weight: bold; -fx-font-size: 14px; -fx-cursor: hand; -fx-font-family: 'Segoe UI', sans-serif;"
                        prefWidth="370" prefHeight="44"/>
            </VBox>

            <!-- Séparateur -->
            <VBox alignment="CENTER" spacing="4">
                <Separator prefWidth="370" style="-fx-background-color: #e2e8f0;"/>
            </VBox>

            <!-- Lien de connexion -->
            <HBox alignment="CENTER" spacing="6">
                <Label text="Vous avez déjà un compte?"
                       style="-fx-text-fill: #64748b; -fx-font-size: 14px; -fx-font-family: 'Segoe UI', sans-serif;"/>
                <Hyperlink text="Se connecter" onAction="#showLoginView"
                          style="-fx-text-fill: #3b82f6; -fx-font-weight: 600; -fx-font-size: 14px; -fx-cursor: hand; -fx-underline: false; -fx-font-family: 'Segoe UI', sans-serif;"/>
            </HBox>
        </VBox>
    </VBox>
</StackPane>